"use strict";$(function(){$("#link_login").on("click",function(){$(".reg-box").hide(),$(".login-box").show()}),$("#link_reg").on("click",function(){$(".reg-box").show(),$(".login-box").hide()});var e=layui.form,o=layui.layer;e.verify({password:[/^[\S]{6,12}$/,"密码必须6到12位，且不能出现空格"],repassword:function(e){if($(".reg-box [name=password]").val()!==e)return"两次输入的密码不一致，请重新输入"}}),$("#form-reg").on("submit",function(e){e.preventDefault(),$.post("api/reguser",{username:$('#form-reg [name="username"]').val(),password:$('#form-reg [name="password"]').val()},function(e){return 0!==e.status?o.msg(e.message):(o.msg("注册成功，请登录！"),void $("#link_login").click())})}),$("#form-login").on("submit",function(e){e.preventDefault(),$.ajax({url:"api/login",method:"POST",data:$("#form-login").serialize(),success:function(e){if(0!==e.status)return o.msg("登录失败");o.msg(e.message),localStorage.setItem("token",e.token),location.href="/index.html"}})})});